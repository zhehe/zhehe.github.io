
<title> Filtering Demo With JavaScript / Canvas</title><style type="text/css">
body{background-color:#eee;}
canvas{border:1px solid #ccc;background-color:#fff;}
</style>

<canvas id="myCanvas" width="800" height="400">
</canvas>

<script type='text/javascript'>

var c = document.getElementById("myCanvas");
var context = c.getContext("2d");
var beacon = [{x:10, y:20}, {x:600, y:350}, {x:36, y:220}, {x:490, y:150}]
var colors = [ "#955", "#595", "#559", "#345"];

context.font = "30px Arial";
context.fillText("Filter Demo", 10, 75)

<!-- drawing beacon locatios -->
var drawBeacon = function(number, x, y) {
	var size = 15;
	var distance = 3;
	context.save();
	context.translate(x, y);
		
	context.globalAlpha = 0.6;
	context.fillStyle = colors[number] || "#999";
	context.strokeStyle = "#111";
	
	context.fillRect(-size / 2, -size / 2, size, size);
	context.rotate(Math.PI / 4);
	context.fillRect(-size / 2, -size / 2, size, size);
	
	context.globalAlpha = 1;
	
		context.fillStyle = "rgba(150, 150, 150, 0.1)";
		context.strokeStyle = "rgba(150, 150, 150, .30)";
		
		context.beginPath();
		context.arc(0, 0, distance * 1.05, 0, Math.PI * 2, false);
		context.stroke();
		context.fill();
		context.closePath();
		context.beginPath();
		context.arc(0, 0, distance * 0.95, 0, Math.PI * 2, false);
		context.stroke();
		context.fill();
		context.closePath();
	
	context.restore();
}

var genTrajectory = function(t, dt, x0, y0){
	var x_val = 0;
	var y_val = 0;
	if (t < 23.0){
	 	x_val = x0 + dt*3.1;
		y_val = y0 + dt*1.4;
	}
	if(t >= 23.0 && t < 50.0){
		x_val = x0 + dt*1.1;
		y_val = y0 + dt*2.2;
	}
	
	return {x:x_val, y :y_val}
}

<!-- main simulation loop-->
var simulationEpoch = function(){
  
var t_start = 0.0;
var t_end = 300.0;
var dt = 0.1;
	var ind = 0;
	var pos = []

  for(var i = 0; i < beacon.length; i++){
  	drawBeacon(i,beacon[i].x, beacon[i].y);
  }

	pos[1] = genTrajectory(0, dt, 0, 0)
  for(t = t_start; t < t_end; t = t +dt){
		  genTrajectory(t, dt, pos[ind].x, pos[ind].y);
	  drawBeacon(i,pos[ind].x, pos[ind].y);
	  ind ++;
  }
}

window.onclick = function() {

	setInterval(function() {
		simulationEpoch();
	}, 50);
  
}

window.onclick();
</script>
